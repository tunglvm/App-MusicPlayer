<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Music Library</title>
    <style>
        body { font-family: Arial; background-color: #f5f5f5; padding: 20px; }
        table { width: 100%; border-collapse: collapse; background-color: #fff; }
        th, td { padding: 10px; border: 1px solid #ccc; text-align: left; }
        h2 { margin-top: 30px; }
        form { margin-bottom: 20px; }
        input[type=text], input[type=number] { padding: 5px; margin-right: 10px; }
        img { max-width: 50px; max-height: 50px; }
        audio { width: 100%; margin-top: 10px; }
    </style>
</head>
<body>

<h1>Music Library üéµ</h1>

<!-- üîç T√¨m ki·∫øm v√† s·∫Øp x·∫øp -->
<form th:action="@{/music/search}" method="get">
    <input type="text" name="query" placeholder="T√¨m ki·∫øm b√†i h√°t..." th:value="${query}">
    <button type="submit">T√¨m</button>
    <a th:href="@{/music}">Reset</a>
</form>

<p>S·∫Øp x·∫øp: 
    <a th:href="@{/music(sort='title')}">A ‚Üí Z</a> | 
    <a th:href="@{/music}">M·∫∑c ƒë·ªãnh</a>
</p>

<!-- ‚ûï Th√™m b√†i h√°t -->
<h2>Th√™m b√†i h√°t</h2>
<form th:action="@{/music/add}" method="post">
    <input type="text" name="title" placeholder="T√™n b√†i h√°t" required>
    <input type="text" name="artist" placeholder="Ngh·ªá sƒ©" required>
    <input type="number" name="duration" placeholder="Th·ªùi l∆∞·ª£ng (s)" required>
    <input type="text" name="url" placeholder="URL nh·∫°c (t√πy ch·ªçn)">
    <input type="text" name="coverUrl" placeholder="URL ·∫£nh b√¨a (t√πy ch·ªçn)">
    <button type="submit">Th√™m</button>
</form>

<!-- üìã Danh s√°ch b√†i h√°t -->
<h2>Danh s√°ch b√†i h√°t</h2>
<table>
    <tr>
        <th>ID</th>
        <th>T√™n</th>
        <th>Ngh·ªá sƒ©</th>
        <th>Th·ªùi l∆∞·ª£ng</th>
        <th>·∫¢nh</th>
        <th>Ph√°t</th>
        <th>H√†nh ƒë·ªông</th>
    </tr>
    <tr th:each="song : ${songs}">
        <td th:text="${song.id}"></td>
        <td th:text="${song.title}"></td>
        <td th:text="${song.artist}"></td>
        <td th:text="${song.duration} + 's'"></td>
        <td>
            <img th:if="${song.coverUrl != null}" th:src="${song.coverUrl}" alt="cover">
            <span th:if="${song.coverUrl == null}">Kh√¥ng c√≥</span>
        </td>
        <td>
            <audio controls th:if="${song.url != null}" th:src="${song.url}"></audio>
            <span th:if="${song.url == null}">Kh√¥ng c√≥ URL</span>
        </td>
        <td>
            <!-- ‚úèÔ∏è Form s·ª≠a -->
            <form th:action="@{/music/update}" method="post">
                <input type="hidden" name="id" th:value="${song.id}" />
                <input type="text" name="title" th:placeholder="${song.title}" required>
                <input type="text" name="artist" th:placeholder="${song.artist}" required>
                <input type="number" name="duration" th:placeholder="${song.duration}" required>
                <input type="text" name="url" th:placeholder="${song.url}">
                <input type="text" name="coverUrl" th:placeholder="${song.coverUrl}">
                <button type="submit">S·ª≠a</button>
            </form>
            <!-- üóë X√≥a -->
            <a th:href="@{'/music/delete/' + ${song.id}}">X√≥a</a>
        </td>
    </tr>
</table>

<!-- üßπ X√≥a t·∫•t c·∫£ -->
<br>
<a th:href="@{/music/clear}" onclick="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·∫•t c·∫£ kh√¥ng?')">üßπ X√≥a t·∫•t c·∫£ b√†i h√°t</a>

</body>
</html>
